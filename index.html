<!DOCTYPE html>
<meta charset="utf-8">
<style>
line {
  stroke-width: 1.5px;
}
</style>
<body>
<script src="https://d3js.org/d3.v3.min.js"></script>
<script>


var dim=460,
    width = dim,
    height = dim,
    N = 3,
    M= 10,
    T= 100;

var data = [];
for(var k = 0; k < T; k++){
  data[k] = [];
  for(var i = 0; i < N; i++){
    for(var j = 0; j < M; j++){
      data[k].push({'x1': width/2 + width/2*j/M*Math.cos(Math.PI*2/N*(i-1)%N),
                 'y1': width/2 + width/2*j/M*Math.sin(Math.PI*2/N*(i-1)%N),
                 'x2': width/2 + width/2*Math.cos(Math.PI*2*i/N) - width/2*j/M*Math.cos(Math.PI*2*i/N),
                 'y2': width/2 + width/2*Math.sin(Math.PI*2*i/N) - width/2*j/M*Math.sin(Math.PI*2*i/N)});
    }
  }
  N++;
}


var color = d3.scale.category20c();

var svgs = [];
var lines = [];
for(var i = 0; i < T; i++){
  svgs[i] = d3.select("body").append("svg")
      .attr("width", width)
      .attr("height", height);
  svgs[i].append("text")
    .attr("dx",0)
    .attr("dy",20)
    .text("N = "+ (N-T+i))
    .attr("stroke", function(d){ return color(i%20)});
  lines[i] = svgs[i].selectAll(".lines");
  lines[i].data(data[i])
    .enter().append("line")
    .attr("x1", function(d){ return d.x1;})
    .attr("y1", function(d){ return d.y1;})
    .attr("x2", function(d){ return d.x2;})
    .attr("y2", function(d){ return d.y2;})
    .attr("stroke", function(d){ return color(i%20)});
}



</script>
